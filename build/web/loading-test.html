<!DOCTYPE DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Venus One - Loading Test</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: monospace;
            background: #0D0D1A;
            color: #FFD700;
        }
        #log {
            white-space: pre-wrap;
            line-height: 1.6;
        }
        .success { color: #4ade80; }
        .warning { color: #fbbf24; }
        .error { color: #ef4444; }
    </style>
</head>
<body>
    <h1>üîç Venus One - Loading Diagnostic</h1>
    <div id="log"></div>

    <script>
        const log = document.getElementById('log');

        function addLog(message, type = 'info') {
            const time = new Date().toLocaleTimeString();
            const className = type === 'success' ? 'success' : type === 'error' ? 'error' : type === 'warning' ? 'warning' : '';
            log.innerHTML += `<div class="${className}">[${time}] ${message}</div>`;
            console.log(message);
        }

        addLog('üöÄ Starting loading test...');

        // Test 1: Check if server is responding
        addLog('Test 1: Checking server...', 'info');
        fetch('/index.html')
            .then(r => {
                if (r.ok) {
                    addLog('‚úì Server is responding (200 OK)', 'success');
                } else {
                    addLog(`‚úó Server responded with status ${r.status}`, 'error');
                }
            })
            .catch(e => {
                addLog(`‚úó Server error: ${e.message}`, 'error');
            });

        // Test 2: Check if Flutter bootstrap exists
        addLog('Test 2: Checking Flutter bootstrap...', 'info');
        fetch('/flutter_bootstrap.js')
            .then(r => {
                if (r.ok) {
                    addLog('‚úì flutter_bootstrap.js found', 'success');
                } else {
                    addLog('‚úó flutter_bootstrap.js not found', 'error');
                }
            });

        // Test 3: Check if main.dart.js exists
        addLog('Test 3: Checking main.dart.js...', 'info');
        fetch('/main.dart.js')
            .then(r => {
                if (r.ok) {
                    addLog('‚úì main.dart.js found', 'success');
                    return r.text();
                } else {
                    addLog('‚úó main.dart.js not found', 'error');
                }
            })
            .then(content => {
                if (content && content.length > 0) {
                    addLog(`  File size: ${(content.length / 1024).toFixed(2)} KB`, 'info');
                }
            });

        // Test 4: Check if CanvasKit is available
        addLog('Test 4: Checking CanvasKit...', 'info');
        fetch('/canvaskit/canvaskit.js')
            .then(r => {
                if (r.ok) {
                    addLog('‚úì CanvasKit found', 'success');
                } else {
                    addLog('‚úó CanvasKit not found', 'error');
                }
            });

        // Test 5: Try to load the actual app
        addLog('Test 5: Attempting to load main app...', 'info');
        setTimeout(() => {
            addLog('‚è≥ Opening main app in 3 seconds...', 'warning');
            addLog('   Watch the browser console for Flutter debug logs', 'info');
            setTimeout(() => {
                window.location.href = '/index.html';
            }, 3000);
        }, 2000);
    </script>
</body>
</html>
